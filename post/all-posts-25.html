<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage" data-theme="light">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>
    
     - ddsteed&#39;s personal blog
    </title>
  

  
  
  
  <link rel="alternate" hreflang="en" href="/post/all-posts-25.html" />


<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes" />


<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />


<meta name="applicable-device" content="pc,mobile">
<meta name="color-scheme" content="light dark" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">


<meta name="generator" content="Hugo 0.152.2" />


<link rel="canonical" href="/post/all-posts-25.html" />




<meta name="author" content="RDS" />
<meta name="description" content="✔ DONE 无题 misc@感悟 世人对岳飞的认识，大多来自于他写的《满江红》，“三十功名尘与土，八千里路云和月”，何等荡气回肠，何等波澜壮阔。“待从头，收拾旧河山，朝天阙”，然后风波亭，莫须有，金戈铁马，戛然而止。无论是当时的人，还是后世的我，都唏嘘不已，无语凝噎。但不管如何，这等豪迈的英雄气概，是长留心间的。可对于上面的这首词，很多人就不知晓了，即使读到它，看到作者是岳飞时，都很惊讶，难以置信豪迈的岳飞，也有如此的细腻情感。
" />





  




<meta name="keywords" content="rds, blog" />


<meta property="og:url" content="/post/all-posts-25.html">
  <meta property="og:site_name" content="ddsteed&#39;s personal blog">
  <meta property="og:title" content="ddsteed&#39;s personal blog">
  <meta property="og:description" content="✔ DONE 无题 misc@感悟 世人对岳飞的认识，大多来自于他写的《满江红》，“三十功名尘与土，八千里路云和月”，何等荡气回肠，何等波澜壮阔。“待从头，收拾旧河山，朝天阙”，然后风波亭，莫须有，金戈铁马，戛然而止。无论是当时的人，还是后世的我，都唏嘘不已，无语凝噎。但不管如何，这等豪迈的英雄气概，是长留心间的。可对于上面的这首词，很多人就不知晓了，即使读到它，看到作者是岳飞时，都很惊讶，难以置信豪迈的岳飞，也有如此的细腻情感。">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">

  <meta itemprop="name" content="ddsteed&#39;s personal blog">
  <meta itemprop="description" content="✔ DONE 无题 misc@感悟 世人对岳飞的认识，大多来自于他写的《满江红》，“三十功名尘与土，八千里路云和月”，何等荡气回肠，何等波澜壮阔。“待从头，收拾旧河山，朝天阙”，然后风波亭，莫须有，金戈铁马，戛然而止。无论是当时的人，还是后世的我，都唏嘘不已，无语凝噎。但不管如何，这等豪迈的英雄气概，是长留心间的。可对于上面的这首词，很多人就不知晓了，即使读到它，看到作者是岳飞时，都很惊讶，难以置信豪迈的岳飞，也有如此的细腻情感。">
  <meta itemprop="wordCount" content="8482">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="ddsteed&#39;s personal blog">
  <meta name="twitter:description" content="✔ DONE 无题 misc@感悟 世人对岳飞的认识，大多来自于他写的《满江红》，“三十功名尘与土，八千里路云和月”，何等荡气回肠，何等波澜壮阔。“待从头，收拾旧河山，朝天阙”，然后风波亭，莫须有，金戈铁马，戛然而止。无论是当时的人，还是后世的我，都唏嘘不已，无语凝噎。但不管如何，这等豪迈的英雄气概，是长留心间的。可对于上面的这首词，很多人就不知晓了，即使读到它，看到作者是岳飞时，都很惊讶，难以置信豪迈的岳飞，也有如此的细腻情感。">

<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/css/style.min.d08da89780982524d07aecf3c39bc2c02d68c41afbb1d672d9feffd75d515845.css" integrity="sha256-0I2ol4CYJSTQeuzzw5vCwC1oxBr7sdZy2f7/111RWEU=" media="screen"
  crossorigin="anonymous">
<style>
  .wallpaper {
    background-image: url('/static/img/wallpaper.jpg');
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-size: cover;
  }
</style>





<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->





<script>
  (function () {
    var savedTheme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', savedTheme);
  })();
</script>


</head>

<body>
  <div id="back-to-top"></div>

  <header class="site-header">
    
<div class="desktop-header">
  <div class="desktop-header-logo">
    <a href="/" class="logo">
      
      点点马的蚂蚁窝
      
    </a>
  </div>

  <nav class="desktop-navbar">
    <ul id="menu" class="menu">
      
      
      <li class="menu-item">
        
        
        
        <a class="menu-item-link" href="/index.html">首页</a>
        

        

      </li>
      
      <li class="menu-item">
        
        
        
        <a class="menu-item-link" href="/post/index.html">归档</a>
        

        

      </li>
      
      <li class="menu-item">
        
        
        
        <a class="menu-item-link" href="/about/index-zh.html">关于</a>
        

        

      </li>
      
      <li class="menu-item">
        
        
        
        <a class="menu-item-link" href="/tags/index.html">标签</a>
        

        

      </li>
      
      <li class="menu-item">
        
        
        
        <a class="menu-item-link" href="/categories/index.html">分类</a>
        

        

      </li>
      

      
      

      
      <li class="menu-item">
        <a id="openSearch" class="menu-item-link menu-item-search" href="#">
          
<svg aria-hidden="true" class="lucide lucide-search hi-svg-inline icon--search" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
        </a>
      </li>
      

      <li class="menu-item">
        <a class="theme-toggle menu-item-link" href="javascript:void(0);">

          
<svg aria-hidden="true" class="lucide lucide-sun hi-svg-inline theme-icon-light" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>

          
<svg aria-hidden="true" class="lucide lucide-moon hi-svg-inline theme-icon-dark" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>

        </a>
      </li>

      <li class="menu-item">
        <a class="menu-item-link" href="/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
          title="rss" target="_blank">
          
<svg aria-hidden="true" class="lucide lucide-rss hi-svg-inline icon--rss" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/></svg>
        </a>
        
      </li>
    </ul>
  </nav>
</div>

    

<div class="mobile-header">
  <div id="mobile-navbar" class="mobile-navbar">
    <div id="mobile-navbar-icon" class="mobile-navbar-icon">
      
<svg aria-hidden="true" class="lucide lucide-menu hi-svg-inline icon--menu" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
    </div>
    <div class="mobile-navbar-logo">
      <a href="/" class="logo">点点马的蚂蚁窝</a>
    </div>
  </div>

  <div id="mobile-menu-close-modal" class="mobile-menu-close-modal"></div>
  <nav id="mobile-menu" class="mobile-menu">
    <ul class="mobile-menu-list">
      <li class="mobile-menu-item">
        
        
        
        <a class="menu-item-link" href="/index.html">首页</a>
        
        
      </li><li class="mobile-menu-item">
        
        
        
        <a class="menu-item-link" href="/post/index.html">归档</a>
        
        
      </li><li class="mobile-menu-item">
        
        
        
        <a class="menu-item-link" href="/about/index-zh.html">关于</a>
        
        
      </li><li class="mobile-menu-item">
        
        
        
        <a class="menu-item-link" href="/tags/index.html">标签</a>
        
        
      </li><li class="mobile-menu-item">
        
        
        
        <a class="menu-item-link" href="/categories/index.html">分类</a>
        
        
      </li>
      

      
      <li class="mobile-menu-item">
        <a id="openSearchMobile" class="mobile-menu-item-link menu-item-search" href="#">
          
<svg aria-hidden="true" class="lucide lucide-search hi-svg-inline icon--search" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
        </a>
      </li>
      

      <li class="mobile-menu-item">
        <a class="theme-toggle menu-item-link" href="javascript:void(0);">

          
<svg aria-hidden="true" class="lucide lucide-sun hi-svg-inline theme-icon-light" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>

          
<svg aria-hidden="true" class="lucide lucide-moon hi-svg-inline theme-icon-dark" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>

        </a>
      </li>

      <li class="mobile-menu-item">
        <a class="menu-item-link" href="/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
          title="rss" target="_blank">
          
<svg aria-hidden="true" class="lucide lucide-rss hi-svg-inline icon--rss" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/></svg>
        </a>
        
      </li>
    </ul>
  </nav>
</div>

  </header>

  

  



  <main id="main" class="main pico container">
    <div class="content-wrapper">
  <aside class="sidebar">
  </aside>
  <div id="content" class="content">
    <article class="post">
      
      <header class="post-header">
        <h1 class="post-title"></h1>
        



        <div class="post-meta-list">
  <div class="post-meta-item post-meta-author">
    
<svg aria-hidden="true" class="lucide lucide-user-round-pen hi-svg-inline" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M2 21a8 8 0 0 1 10.821-7.487"/><path d="M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"/><circle cx="10" cy="8" r="5"/></svg>
    <a href="/about">
      <span class="post-meta-author-name">
        RDS
      </span>
    </a>
    
  </div>

  <div class="post-meta-item post-meta-time">
    
<svg aria-hidden="true" class="lucide lucide-calendar-days hi-svg-inline" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/><path d="M8 14h.01"/><path d="M12 14h.01"/><path d="M16 14h.01"/><path d="M8 18h.01"/><path d="M12 18h.01"/><path d="M16 18h.01"/></svg>
    <time datetime=" 0001-01-01">
      0001-01-01
    </time>


    

  </div>


  <div class="post-meta__right">
    <span class="post-meta-more">
      8482 words -
      17 min read
      
      - <a href="/post/all-posts-25.html#disqus_thread">Comments</a>
      
      - <span class="remark42__counter" data-url="/post/all-posts-25.html"></span> Comments
      </span>

    


    
    


    
    
  </div>
</div>

      </header>

      
      <div class="post-content">
        <h2 id="wuti"><span class="org-todo done __DONE">✔ DONE</span> 无题 <span class="tag"><span class="misc">misc</span><span class="___">@感悟</span></span></h2>

<link rel="stylesheet" href="/css/hugo-easy-gallery.css" />
<div class="box">
<figure  itemprop="associatedMedia"
  itemscope itemtype="http://schema.org/ImageObject" 
  style="max-width:50%" >
    <div class="img">
      <img itemprop="thumbnail" src="/img/xiao_chong_shan.jpg" />
    </div>
    <a href="/img/xiao_chong_shan.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

<hr>
<p>世人对岳飞的认识，大多来自于他写的《满江红》，“三十功名尘与土，八千里路云和月”，何等荡气回肠，何等波澜壮阔。“待从头，收拾旧河山，朝天阙”，然后风波亭，莫须有，金戈铁马，戛然而止。无论是当时的人，还是后世的我，都唏嘘不已，无语凝噎。但不管如何，这等豪迈的英雄气概，是长留心间的。可对于上面的这首词，很多人就不知晓了，即使读到它，看到作者是岳飞时，都很惊讶，难以置信豪迈的岳飞，也有如此的细腻情感。</p>
<p>我们从小都被告知，岳飞之死，是秦桧诬陷而致。大约二十年前，我读到李亚平的这本书，相当程度地颠覆了我的认知。后来罗胖在刚开始创业时讲《罗辑思维》，里面有一期借鉴了这本书的内容，专门讲岳飞之死。有新意，但给我的震撼就没有这本书那么大了。</p>


<div class="box">
<figure  itemprop="associatedMedia"
  itemscope itemtype="http://schema.org/ImageObject" 
  style="max-width:30%" >
    <div class="img">
      <img itemprop="thumbnail" src="/img/diguozhengjiewangshi.jpg" />
    </div>
    <a href="/img/diguozhengjiewangshi.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

<hr>
<p>读了这本书，才真正理解岳飞为什么会写下《小重山》。满腔热血，一心为国，却也不被世人所理解，竟然也不被最高层所信任。所谓功名，所谓利益，所谓盘算，所谓得失，不过是他人茶余饭后的闲聊而已。于当事人，理解也罢、误解也罢，又有何助哉？</p>
<p>上月中旬，不小心得了带状疱疹。开始并没放在心上，医生说疼得很，是否要打进口的针药。我笑着说，无非疼一下，不碍事的。医生继续“吓唬”我，有些人要疼一两年，有些人要疼 3、5 个月，一般至少都要疼 2、3 个月。我挥挥手，无妨，几个月而已。可真正疼起来，我才知道什么是疼 &mdash;&mdash; 每天晚上要疼醒 4、5 次啊。到医院再看医生，结束时开了两种药：一是疼得受不了的时候吃的止疼药；一是疼得睡不着的时候吃的安眠药。</p>
<p>半夜起来，独自绕阶行时，脑海里竟然就蹦出岳飞的《小重山》来，虽然是中学时背诵的，但字字清晰，脱口而出，不知是否有感而生。但这次，才真正明白了岳武穆当时的“伤悲”，这无可言说的寂寞。神经之痛、皮肉之痛，哪里比得上内心的痛楚呢？</p>
<p>我好一段时间都疑惑，李商隐写那么多《无题》诗，十分难以理解，为什么不起个名字呢？如今我才明白，有些话，是真找不到名字的。</p>
<h2 id="deep_learning_hisitory"><span class="org-todo done __DONE">✔ DONE</span> 《深度学习革命》&mdash;&mdash; 一部波澜壮阔的当代人工智能简史 <span class="tag"><span class="reading">reading</span><span class="___">@读书</span></span></h2>
<p>断断续续，用了两个星期看完了这本关于当代人工智能简介的书。由于人工智能这几年的火爆，类似题材的书已经很多了，但大多数都翻了几页就放下，引不起兴趣。因为这些作者对于人工智能的发展，尤其是深度学习的起起落落，都是人云亦云，没有新意。仿佛深度学习 就是天上掉下来一样，突然就火了。</p>
<p>而被成为深度学习教父的杰弗里·辛顿，为什么突然获得了计算机的最高奖&mdash;图灵奖，以及更重要的诺贝尔物理学奖，很多人都一头雾水。在本书里，详细讲述了这个坚持的老头，如 何影响深度学习领域，并影响谷歌这样大公司的 AI 发展。读完之后，就会明白，辛顿作为教父，当之无愧。</p>
<p>世人比较熟知辛顿的学生伊利亚，因为他是如日中天的 OpenAI 公司的创始 CTO。对于另一个学生，阿列克斯，就少有人知晓了。实际上，伊利亚以纯粹技术家闻名，阿列克斯就更是一个只关心技术的“宅男”了。当初深度学习再度被认可，就是师徒三人，打造了一个 Alex-Net，在李飞飞的 ImageNet 识别比赛中，一举夺魁。这里的 Alex，就是阿列克斯的名字。师徒三人创建了一个公司，什么产品都没有，只有三个人，就被谷歌公司以 4400 万美元收购了。不看重具体的产品，只是因为这三个人。</p>
<p>杨立昆在 Meta，约书奥在微软，都深刻影响了这些企业的人工智能发展。书里把脉络梳理得又清楚又有故事性。而哈萨比斯如何创立 DeepMind，并被谷歌收购之后发挥重要作用的内幕，也徐徐道来，读起来津津有味。</p>
<p>这本书中译本有两个缺点：一是人名的翻译实在是别扭，大概译者并不太了解深度学习领域；二是书名实在是不好。现在的名字让人一看就以为是本技术书，但原书名是：Genius Makers: The Mavericks Who Brought AI。这明显是传记类，重点是人啊。尤其这个 Mavericks，简直是神来之笔：标新立异的人，不合常规的人。</p>
<p>深度学习的领导者们，配得上这个称呼。</p>


<div class="box">
<figure  itemprop="associatedMedia"
  itemscope itemtype="http://schema.org/ImageObject" 
  style="max-width:50%" >
    <div class="img">
      <img itemprop="thumbnail" src="/img/deep_learning_history.jpg" />
    </div>
    <a href="/img/deep_learning_history.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

<hr>
<p>很久没有读到这么好的技术传记类书了，好像只有 20 年前，读米歇尔·沃尔德洛普的《复杂：诞生于秩序与混沌边缘的科学》可以比拟。还记得读《复杂》时，心潮澎湃，极其渴望投身到复杂科学研究的队伍里。可惜那时没有胆量，不敢放弃熟悉的研究领域。今天，我很开心，看到了深度学习的前景，更投身进了这个领域。即使没有成功，也不会后悔。</p>
<p>以前在学校时，总觉得自己的研究与社会是脱节的，心里十分惶恐。而真正的研究，是应该要解决实际的问题。</p>
<h2 id="emacs_as_python_IDE"><span class="org-todo done __DONE">✔ DONE</span> 把 Emacs 打造为 Python IDE <span class="tag"><span class="tech">tech</span><span class="___">@技术</span></span></h2>
<p>集成开发环境（IDE）是一种帮助程序员高效开发软件代码的软件应用程序。它通过将软件编辑、构建、测试和打包等功能结合到一个易于使用的应用程序中，提高了开发人员的工作效率。就像作家使用文本编辑器，会计师使用电子表格一样，软件开发人员使用 <code>IDE</code> 让他们的工作变得更轻松。当前比较流行的 <code>Python IDE</code> 有 <code>PyCharm</code>, <code>IDEA</code>, <code>VS CODE</code> 等。 <code>Emacs</code> 作为一个可扩展的文本编辑器，处理各种文本数据是非常方便的。我们在 Emacs 里增加 <code>elisp</code> 扩展，就可以模拟各种 <code>IDE</code> 的环境，还能更好。</p>
<h3 id="ide-的功能">IDE 的功能</h3>
<p>需要模拟的 IDE 基本功能应该包含：</p>
<ul>
<li>代码编辑</li>
<li>语法高亮</li>
<li>文档查找</li>
<li>代码跳转</li>
<li>语法解析</li>
<li>代码规范</li>
<li>代码检查</li>
<li>代码调试</li>
</ul>
<h3 id="显示">显示</h3>
<p>基本的功能应该有：代码编辑和语法高亮。Emacs 里自带的 python-mode 就可以满足要求。当打开一个 <code>.py</code> 结尾的文件时，Emacs 会自动匹配 python-mode 模式。</p>
<h4 id="更好的显示">更好的显示</h4>
<p>如果觉得基本的 python-mode 不够，可以用更好的语法解析，然后显示。</p>
<div class="highlight-container">

  <button class="copy-code-btn outline">Copy</button>

  
  <div class="highlight"><div style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-1"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-0-1"> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-2"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-0-2"> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-3"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-0-3"> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-4"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-0-4"> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-5"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-0-5"> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-6"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-0-6"> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-7"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-0-7"> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-8"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-0-8"> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-9"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-0-9"> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-10"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-0-10">10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-11"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-0-11">11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-0-12"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-0-12">12</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span>(<span style="color:#007020">use-package</span> <span style="color:#bb60d5">tree-sitter</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:ensure</span> <span style="color:#60add5">t</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:hook</span> ((<span style="color:#bb60d5">python-mode</span>     <span style="color:#666">.</span> <span style="color:#bb60d5">tree-sitter-hl-mode</span>)
</span></span><span style="display:flex;"><span>         (<span style="color:#bb60d5">python-ts-mode</span>  <span style="color:#666">.</span> <span style="color:#bb60d5">tree-sitter-hl-mode</span>)
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(<span style="color:#007020">use-package</span> <span style="color:#bb60d5">tree-sitter-langs</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:after</span> <span style="color:#bb60d5">tree-sitter</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:config</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#bb60d5">tree-sitter-require</span> <span style="color:#517918">&#39;python</span>)
</span></span><span style="display:flex;"><span>)</span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<p>有时候 Emacs 升级了之后， <code>tree-sitter</code> 版本不匹配，可以手动编译 <code>tree-sitter-langs</code> ，然后把编译好的 <code>dylib</code> 文件拷贝到 <code>~/.emacs.d/tree-sitter</code> 目录下，取名为 <code>libtree-sitter-python.dylib</code></p>
<p>设置好了之后，语法高亮就比较漂亮了。</p>


<div class="box">
<figure  itemprop="associatedMedia"
  itemscope itemtype="http://schema.org/ImageObject" 
  style="max-width:60%" >
    <div class="img">
      <img itemprop="thumbnail" src="/img/tree-sitter.jpg" />
    </div>
    <a href="/img/tree-sitter.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

<h3 id="文档说明">文档说明</h3>
<p>编程需要时时地查找某个函数的说明、用法等。我们采用 <code>eldoc</code> 宏包处理。</p>
<div class="highlight-container">

  <button class="copy-code-btn outline">Copy</button>

  
  <div class="highlight"><div style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-1-1"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-1-1">1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-1-2"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-1-2">2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-1-3"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-1-3">3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-1-4"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-1-4">4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-1-5"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-1-5">5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-1-6"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-1-6">6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-1-7"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-1-7">7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-1-8"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-1-8">8</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span>(<span style="color:#007020">use-package</span> <span style="color:#bb60d5">eldoc</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:ensure</span> <span style="color:#60add5">t</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:defer</span> <span style="color:#60add5">t</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:init</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#bb60d5">global-eldoc-mode</span>)
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(<span style="color:#bb60d5">global-set-key</span> (<span style="color:#bb60d5">kbd</span> <span style="color:#4070a0">&#34;C-x c d&#34;</span>) <span style="color:#517918">&#39;eldoc-doc-buffer</span>)</span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<p>当光标放在某个函数/变量上时，用快捷键 <code>C-x c d</code> 或者 <code>M-x eldoc</code> 就可以显示它的资料
说明&mdash;一般就是把函数定义里的说明信息显示出来。 比如，</p>


<div class="box">
<figure  itemprop="associatedMedia"
  itemscope itemtype="http://schema.org/ImageObject" 
  style="max-width:60%" >
    <div class="img">
      <img itemprop="thumbnail" src="/img/eldoc.jpg" />
    </div>
    <a href="/img/eldoc.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

<hr>
<h4 id="更好的文档">更好的文档</h4>
<p><code>eldoc</code> 能够识别很多编程语言，既然通用性强，专业性就要稍稍弱一点。因此，我们可以用专门针对 <code>python</code> 语言的文档说明&mdash;<code>elpy</code> 。</p>
<div class="highlight-container">

  <button class="copy-code-btn outline">Copy</button>

  
  <div class="highlight"><div style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-2-1"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-2-1">1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-2-2"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-2-2">2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-2-3"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-2-3">3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-2-4"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-2-4">4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-2-5"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-2-5">5</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span>(<span style="color:#007020">use-package</span> <span style="color:#bb60d5">elpy</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:ensure</span> <span style="color:#60add5">t</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:init</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#bb60d5">elpy-enable</span>)
</span></span><span style="display:flex;"><span>)</span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<p>当按下快捷键 <code>C-c C-d</code> 或者 <code>M-x elpy-doc</code> 时，就可以在 <code>elpy</code> 的 buffer 里显示文档。
比如，</p>


<div class="box">
<figure  itemprop="associatedMedia"
  itemscope itemtype="http://schema.org/ImageObject" 
  style="max-width:60%" >
    <div class="img">
      <img itemprop="thumbnail" src="/img/elpy-doc.jpg" />
    </div>
    <a href="/img/elpy-doc.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

<hr>
<p><code>elpy</code> 不仅仅是 python 的文档调用，它包含了更多的 python 环境设置（后面我会讲到其他的应用），这里只是显示了它的文档显示功能。</p>
<h3 id="语法检查">语法检查</h3>
<p>python 代码是否符合语法，我们可以用专门的检查工具来判断。最常用的有 <code>flycheck</code> 和
<code>flymake</code> 两种。我倾向于用 <del>flycheck+</del> ，还是用 <code>flymake</code> 吧，Emacs 30 之后，就完全内
置了，对 <code>ruff</code> 的支持也非常好。</p>
<div class="highlight-container">

  <button class="copy-code-btn outline">Copy</button>

  
  <div class="highlight"><div style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-1"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-3-1">1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-2"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-3-2">2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-3"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-3-3">3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-4"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-3-4">4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-5"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-3-5">5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-3-6"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-3-6">6</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span>(<span style="color:#007020">use-package</span> <span style="color:#bb60d5">flymake</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:ensure</span> <span style="color:#60add5">t</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:custom</span> ((<span style="color:#bb60d5">flymake-start-on-flymake-mode</span> <span style="color:#60add5">nil</span>)
</span></span><span style="display:flex;"><span>           (<span style="color:#bb60d5">flymake-no-changes-timeout</span> <span style="color:#60add5">nil</span>)
</span></span><span style="display:flex;"><span>           (<span style="color:#007020">setq</span> <span style="color:#bb60d5">flymake-show-diagnostics-at-end-of-line</span> <span style="color:#60add5">t</span>)
</span></span><span style="display:flex;"><span>           (<span style="color:#bb60d5">flymake-start-on-save-buffer</span> <span style="color:#60add5">t</span>)))</span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<p>如果发现代码里有红色的波浪线显示，就表示发现了语法错误，请尽快修改。</p>
<h4 id="更好的语法检查">更好的语法检查</h4>
<p><code>flymake</code> 默认调用了 <code>flake8</code> 或者其他工具来进行语法检查，我们可以把这些工具换成最新最快的工具&mdash;- <code>ruff</code> 。</p>
<div class="highlight-container">

  <button class="copy-code-btn outline">Copy</button>

  
  <div class="highlight"><div style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-1"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-4-1"> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-2"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-4-2"> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-3"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-4-3"> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-4"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-4-4"> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-5"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-4-5"> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-6"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-4-6"> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-7"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-4-7"> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-8"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-4-8"> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-9"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-4-9"> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-4-10"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-4-10">10</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic">;; 通过 use-package 安装 flymake-ruff</span>
</span></span><span style="display:flex;"><span>(<span style="color:#007020">use-package</span> <span style="color:#bb60d5">flymake-ruff</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:ensure</span> <span style="color:#60add5">t</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:hook</span> ((<span style="color:#bb60d5">python-mode</span>    <span style="color:#666">.</span> <span style="color:#bb60d5">flymake-ruff-load</span>)      <span style="color:#60a0b0;font-style:italic">; 传统 python-mode</span>
</span></span><span style="display:flex;"><span>         (<span style="color:#bb60d5">python-ts-mode</span> <span style="color:#666">.</span> <span style="color:#bb60d5">flymake-ruff-load</span>))     <span style="color:#60a0b0;font-style:italic">; Tree-sitter 版</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:config</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#007020">setq</span> <span style="color:#bb60d5">flymake-ruff-program-args</span> <span style="color:#666">&#39;</span>(<span style="color:#4070a0">&#34;--quiet&#34;</span> <span style="color:#4070a0">&#34;--output-format=concise&#34;</span>))
</span></span><span style="display:flex;"><span>  (<span style="color:#007020">setq</span> <span style="color:#bb60d5">flymake-show-diagnostics-at-end-of-line</span> <span style="color:#60add5">t</span>) <span style="color:#60a0b0;font-style:italic">; 行尾显示</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#007020">setq</span> <span style="color:#bb60d5">flymake-no-changes-timeout</span> <span style="color:#60add5">nil</span>)            <span style="color:#60a0b0;font-style:italic">; 实时检查</span>
</span></span><span style="display:flex;"><span>)</span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<h4 id="单独的检查函数">单独的检查函数</h4>
<p>还可以单独定义一个检查函数，方便查看。</p>
<div class="highlight-container">

  <button class="copy-code-btn outline">Copy</button>

  
  <div class="highlight"><div style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-1"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-1"> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-2"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-2"> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-3"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-3"> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-4"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-4"> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-5"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-5"> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-6"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-6"> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-7"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-7"> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-8"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-8"> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-9"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-9"> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-10"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-10">10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-11"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-11">11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-12"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-12">12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-13"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-13">13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-14"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-14">14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-15"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-15">15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-16"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-16">16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-17"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-17">17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-18"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-18">18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-19"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-19">19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-20"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-20">20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-21"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-21">21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-22"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-22">22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-23"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-23">23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-5-24"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-5-24">24</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic">;; 定义ruff-check 修复命令</span>
</span></span><span style="display:flex;"><span>(<span style="color:#bb60d5">reformatter-define</span> <span style="color:#bb60d5">ruff-check</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:program</span> <span style="color:#4070a0">&#34;ruff&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:args</span> <span style="color:#666">&#39;</span>(<span style="color:#4070a0">&#34;check&#34;</span> <span style="color:#4070a0">&#34;--fix&#34;</span> <span style="color:#4070a0">&#34;-&#34;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:lighter</span> <span style="color:#4070a0">&#34; RuffCheck&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic">; 单独再定义一个检查函数</span>
</span></span><span style="display:flex;"><span>(<span style="color:#007020">defun</span> <span style="color:#bb60d5">ruff-check</span> ()
</span></span><span style="display:flex;"><span>  (<span style="color:#007020">interactive</span>)
</span></span><span style="display:flex;"><span>  (<span style="color:#007020">let</span> ((<span style="color:#bb60d5">current-file</span> (<span style="color:#06287e">buffer-file-name</span>)))
</span></span><span style="display:flex;"><span>    (<span style="color:#007020">if</span> <span style="color:#bb60d5">current-file</span>
</span></span><span style="display:flex;"><span>        (<span style="color:#bb60d5">async-shell-command</span>
</span></span><span style="display:flex;"><span>         (<span style="color:#06287e">format</span> <span style="color:#4070a0">&#34;ruff check --select ALL %s&#34;</span> (<span style="color:#bb60d5">shell-quote-argument</span> <span style="color:#bb60d5">current-file</span>))
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic">;; 在python mode中，保存时自动运行ruff-format</span>
</span></span><span style="display:flex;"><span>(<span style="color:#bb60d5">add-hook</span> <span style="color:#517918">&#39;python-mode-hook</span>
</span></span><span style="display:flex;"><span>          (<span style="color:#007020">lambda</span> ()
</span></span><span style="display:flex;"><span>            (<span style="color:#bb60d5">add-hook</span> <span style="color:#517918">&#39;before-save-hook</span> <span style="color:#06287e">#&#39;</span><span style="color:#bb60d5">ruff-format-region</span> <span style="color:#60add5">nil</span> <span style="color:#60add5">t</span>))
</span></span><span style="display:flex;"><span>)</span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<p><code>ruff</code> 需要单独安装，用 <code>pip</code> 或者 <code>brew</code> 都可以，只要系统的命令行可以找到它就行。</p>
<h3 id="代码跳转">代码跳转</h3>
<p>在书写/阅读代码时，常常需要从当前使用函数的位置，跳转到函数的定义位置。 <code>elpy</code> 就
直接支持这个功能 &mdash; 在函数名的位置处，按下快捷键 <code>C-c .</code> 或者 <code>M-x elpy-goto-definition</code> 或者 <code>M-x elpy-goto-definition-other-window</code> （在新窗口打开定义文件），就可以跳转到函数的定义，即使定义是在另一个文档里也不要紧，
<code>elpy</code> 都自动打开那个文档，把光标放在函数的定义处。</p>
<p>按下 <code>M-,</code> ，就可以返回到原来的位置。</p>
<h4 id="更好的跳转">更好的跳转</h4>
<p>我们可以用 <code>xref</code> 实现更好的跳转</p>
<ul>
<li><code>C-x C-.</code> or <code>M-x xref-find-definitins</code></li>
<li><code>C-x C-/</code> or <code>M-x xref-find-references</code></li>
</ul>
<p>然后用 <code>C-x C-,</code> or <code>M-x xref-pop-marker-stack</code> or <code>M-,</code> 返回原位置。</p>
<h4 id="更全面的跳转">更全面的跳转</h4>
<p>有时候，项目内的模块， <code>elpy</code> 和 <code>xref</code> 都找不到，我们就自己定义一个函数，功过 <code>egrep</code> 来找到函数定义，然后手动打开</p>
<div class="highlight-container">

  <button class="copy-code-btn outline">Copy</button>

  
  <div class="highlight"><div style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-1"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-6-1"> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-2"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-6-2"> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-3"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-6-3"> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-4"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-6-4"> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-5"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-6-5"> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-6"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-6-6"> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-7"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-6-7"> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-8"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-6-8"> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-9"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-6-9"> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-10"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-6-10">10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-11"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-6-11">11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-12"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-6-12">12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-13"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-6-13">13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-14"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-6-14">14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-6-15"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-6-15">15</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span>(<span style="color:#007020">defun</span> <span style="color:#bb60d5">elpy-goto-definition-or-rgrep</span> ()
</span></span><span style="display:flex;"><span>  <span style="color:#4070a0">&#34;Go to the definition of the symbol at point, if found. Otherwise, run </span><span style="color:#517918">`elpy-rgrep-symbol&#39;</span><span style="color:#4070a0">.&#34;</span>
</span></span><span style="display:flex;"><span>    (<span style="color:#007020">interactive</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#007020">if</span> (<span style="color:#bb60d5">version&lt;</span> <span style="color:#bb60d5">emacs-version</span> <span style="color:#4070a0">&#34;25.1&#34;</span>)
</span></span><span style="display:flex;"><span>        (<span style="color:#bb60d5">ring-insert</span> <span style="color:#bb60d5">find-tag-marker-ring</span> (<span style="color:#06287e">point-marker</span>))
</span></span><span style="display:flex;"><span>      (<span style="color:#bb60d5">xref-push-marker-stack</span>))
</span></span><span style="display:flex;"><span>    (<span style="color:#007020">condition-case</span> <span style="color:#60add5">nil</span> (<span style="color:#bb60d5">elpy-goto-definition</span>)
</span></span><span style="display:flex;"><span>        (<span style="color:#007020">error</span> (<span style="color:#bb60d5">elpy-rgrep-symbol</span>
</span></span><span style="display:flex;"><span>                   (<span style="color:#06287e">concat</span> <span style="color:#4070a0">&#34;\\(def\\|class\\)\s&#34;</span> (<span style="color:#bb60d5">thing-at-point</span> <span style="color:#517918">&#39;symbol</span>) <span style="color:#4070a0">&#34;(&#34;</span>)))))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(<span style="color:#06287e">define-key</span> <span style="color:#bb60d5">elpy-mode-map</span> (<span style="color:#bb60d5">kbd</span> <span style="color:#4070a0">&#34;C-c .&#34;</span>)     <span style="color:#517918">&#39;elpy-goto-definition</span>)
</span></span><span style="display:flex;"><span>(<span style="color:#06287e">define-key</span> <span style="color:#bb60d5">elpy-mode-map</span> (<span style="color:#bb60d5">kbd</span> <span style="color:#4070a0">&#34;C-c d&#34;</span>)     <span style="color:#517918">&#39;elpy-goto-definition-or-rgrep</span>)
</span></span><span style="display:flex;"><span>(<span style="color:#06287e">define-key</span> <span style="color:#bb60d5">elpy-mode-map</span> (<span style="color:#bb60d5">kbd</span> <span style="color:#4070a0">&#34;C-x C-.&#34;</span>)   <span style="color:#517918">&#39;xref-find-definitions</span>)
</span></span><span style="display:flex;"><span>(<span style="color:#06287e">define-key</span> <span style="color:#bb60d5">elpy-mode-map</span> (<span style="color:#bb60d5">kbd</span> <span style="color:#4070a0">&#34;C-x C-/&#34;</span>)   <span style="color:#517918">&#39;xref-find-references</span>)
</span></span><span style="display:flex;"><span>(<span style="color:#06287e">define-key</span> <span style="color:#bb60d5">elpy-mode-map</span> (<span style="color:#bb60d5">kbd</span> <span style="color:#4070a0">&#34;C-x C-,&#34;</span>)   <span style="color:#517918">&#39;xref-pop-marker-stack</span>)</span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<p>当按下 <code>C-c d</code> or <code>M-x elpy-goto-definition-or-rgrep</code> 时，就会把所有相关的 class 和 def 定义文件都找到。</p>
<h3 id="代码补全">代码补全</h3>
<p>程序员通常都很懒，写代码的时候，如果能够只敲一两个字符，系统能够猜出来接下来要写什么就好了，直接按回车键或者 TAB，就把剩下的字符都自动补全了。Emacs 当然也有这样的插件 &mdash; <code>company</code> ：complete anything.</p>
<div class="highlight-container">

  <button class="copy-code-btn outline">Copy</button>

  
  <div class="highlight"><div style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-1"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-1"> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-2"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-2"> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-3"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-3"> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-4"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-4"> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-5"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-5"> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-6"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-6"> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-7"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-7"> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-8"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-8"> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-9"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-9"> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-10"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-10">10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-11"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-11">11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-12"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-12">12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-13"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-13">13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-14"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-14">14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-15"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-15">15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-16"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-16">16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-17"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-17">17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-18"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-18">18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-19"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-19">19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-20"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-20">20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-21"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-21">21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-22"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-22">22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-23"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-23">23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-24"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-24">24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-25"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-25">25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-26"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-26">26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-27"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-27">27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-28"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-28">28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-29"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-29">29</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-30"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-30">30</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-31"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-31">31</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-32"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-32">32</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-33"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-33">33</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-34"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-34">34</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-35"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-35">35</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-36"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-36">36</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-37"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-37">37</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-38"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-38">38</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-39"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-39">39</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-40"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-40">40</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-41"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-41">41</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-42"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-42">42</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-43"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-43">43</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-44"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-44">44</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-7-45"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-7-45">45</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span>(<span style="color:#007020">use-package</span> <span style="color:#bb60d5">company</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:ensure</span> <span style="color:#60add5">t</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:init</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#bb60d5">add-hook</span> <span style="color:#517918">&#39;c-mode-common-hook</span> <span style="color:#517918">&#39;company-mode</span>)
</span></span><span style="display:flex;"><span>  (<span style="color:#bb60d5">add-hook</span> <span style="color:#517918">&#39;python-mode-common-hook</span> <span style="color:#517918">&#39;company-mode</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:config</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#bb60d5">eval-after-load</span> <span style="color:#517918">&#39;c-mode</span> <span style="color:#666">&#39;</span>(<span style="color:#06287e">define-key</span> <span style="color:#bb60d5">c-mode-map</span> (<span style="color:#bb60d5">kbd</span> <span style="color:#4070a0">&#34;[tab]&#34;</span>) <span style="color:#517918">&#39;company-complete</span>))
</span></span><span style="display:flex;"><span>  (<span style="color:#007020">setq</span> <span style="color:#bb60d5">company-backends</span> <span style="color:#666">&#39;</span>((<span style="color:#bb60d5">company-capf</span>
</span></span><span style="display:flex;"><span>                           <span style="color:#bb60d5">company-keywords</span>
</span></span><span style="display:flex;"><span>                           <span style="color:#bb60d5">company-semantic</span>
</span></span><span style="display:flex;"><span>                           <span style="color:#bb60d5">company-files</span>
</span></span><span style="display:flex;"><span>                           <span style="color:#bb60d5">company-dabbrev</span>
</span></span><span style="display:flex;"><span>                           <span style="color:#bb60d5">company-dabbrev-code</span>
</span></span><span style="display:flex;"><span>                           <span style="color:#bb60d5">company-etags</span>
</span></span><span style="display:flex;"><span>                           <span style="color:#bb60d5">company-clang</span>
</span></span><span style="display:flex;"><span>                           <span style="color:#bb60d5">company-cmake</span>
</span></span><span style="display:flex;"><span>                           <span style="color:#bb60d5">company-yasnippet</span>)))
</span></span><span style="display:flex;"><span>  (<span style="color:#007020">setq</span> <span style="color:#bb60d5">company-tooltip-limit</span> <span style="color:#40a070">20</span>
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-tooltip-offset-display</span> <span style="color:#517918">&#39;lines</span>
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-tooltip-minimum</span> <span style="color:#40a070">4</span>
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-tooltip-flip-when-above</span> <span style="color:#60add5">t</span>
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-tooltip-margin</span> <span style="color:#40a070">3</span>
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-tooltip-align-annotations</span> <span style="color:#60add5">t</span>  <span style="color:#60a0b0;font-style:italic">; 对齐注释</span>
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-tooltip-annotation-padding</span> <span style="color:#40a070">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-text-face-extra-attributes</span> <span style="color:#666">&#39;</span>(<span style="color:#007020">:weight</span> <span style="color:#bb60d5">bold</span> <span style="color:#007020">:slant</span> <span style="color:#bb60d5">italic</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-text-icons-add-background</span> <span style="color:#60add5">t</span>
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-echo-delay</span> <span style="color:#40a070">0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-require-match</span> <span style="color:#60add5">nil</span>
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-minimum-prefix-length</span> <span style="color:#40a070">1</span>      <span style="color:#60a0b0;font-style:italic">; 只需敲 1 个字母就开始进行自动补全</span>
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-show-numbers</span> <span style="color:#60add5">t</span>               <span style="color:#60a0b0;font-style:italic">; 给选项编号 (按快捷键 M-1、M-2 等等来进行选择).</span>
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-dabbrev-other-buffers</span> <span style="color:#60add5">t</span>
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-dabbrev-ignore-case</span> <span style="color:#517918">&#39;keep-prefix</span>
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-selection-wrap-around</span> <span style="color:#60add5">t</span>
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-show-quick-access</span> <span style="color:#517918">&#39;left</span>
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-idle-delay</span> <span style="color:#40a070">0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-tooltip-idle-delay</span> <span style="color:#40a070">10</span>
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-require-match</span> <span style="color:#60add5">nil</span>
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-frontends</span> <span style="color:#666">&#39;</span>(<span style="color:#bb60d5">company-pseudo-tooltip-unless-just-one-frontend-with-delay</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#bb60d5">company-preview-frontend</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#bb60d5">company-echo-metadata-frontend</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-backends</span> <span style="color:#666">&#39;</span>(<span style="color:#bb60d5">company-capf</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#bb60d5">company-files-exclusions</span> <span style="color:#666">&#39;</span>(<span style="color:#4070a0">&#34;.git/&#34;</span> <span style="color:#4070a0">&#34;.DS_Store&#34;</span>)
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>  (<span style="color:#bb60d5">global-company-mode</span> <span style="color:#40a070">1</span>)
</span></span><span style="display:flex;"><span>)</span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<p>可以看出， <code>company</code> 能识别很多种语言，python 当然也支持了。</p>
<h3 id="lsp">LSP</h3>
<p>LSP 是 Language Server Protocol 的缩写，该协议被用在编辑器或 IDE 与语言服务器之间，为编辑器提供自动补全，跳转到定义和引用查找等功能。以下内容来自 LSP 官网：</p>
<blockquote>
<p>Adding features like auto complete, go to definition, or documentation on hover for a programming language takes significant effort. Traditionally this work had to be repeated for each development tool, as each tool provides different APIs for implementing the same feature.</p>
<p>A Language Server is meant to provide the language-specific smarts and communicate with development tools over a protocol that enables inter-process communication.</p>
<p>The idea behind the Language Server Protocol (LSP) is to standardize the protocol for how such servers and development tools communicate. This way, a single Language Server can be re-used in multiple development tools, which in turn can support multiple languages with minimal effort.</p>
<p>为一种编程语言添加自动补全，跳转到定义或悬停文档等功能需要很大的努力。在过去需要为每个开发工具重复这项工作，因为每个工具都提供不同的 API 来实现相同的功能。</p>
<p>语言服务器旨在提供特定语言的功能，并通过支持进程间通信的协议与开发工具进行通信。</p>
<p>语言服务协议（LSP）背后的想法是对此类服务器和开发工具如何通信的协议进行标准化。这样，单个语言服务器可以在多个开发工具中重复使用，从而可以以最小的努力支持多种语言。</p>
</blockquote>
<p>这样，我们只需在 Emacs 里设置一个客户端，用来对接外部的 python 语言服务器程序，充分利用服务器的所有功能即可。</p>
<h4 id="服务器">服务器</h4>
<p>当前支持 python 最好的语法解析工具是微软开发的 <code>pyright</code> ，以及它的分支
<code>basedpyright</code> 。基本用法是一样的，后者支持更多的功能。它们都可以通过 <code>pip</code> 或者
<code>brew</code> 单独安装。</p>
<h4 id="客户端">客户端</h4>
<p>Emacs 里最流行的 LSP 客户端有三个：</p>
<ul>
<li>lsp-mode （不要与 LSP 服务器混淆了）</li>
<li>eglot</li>
<li>lsp-bridge</li>
</ul>
<p>其中，Emacs 内置了 Eglot，所以最轻量级，但基本满足了需求。除非有特殊的要求，不要轻易使用 lsp-mode，它启动太慢了。</p>
<h4 id="配置">配置</h4>
<div class="highlight-container">

  <button class="copy-code-btn outline">Copy</button>

  
  <div class="highlight"><div style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-1"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-1"> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-2"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-2"> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-3"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-3"> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-4"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-4"> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-5"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-5"> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-6"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-6"> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-7"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-7"> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-8"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-8"> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-9"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-9"> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-10"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-10">10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-11"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-11">11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-12"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-12">12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-13"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-13">13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-14"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-14">14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-15"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-15">15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-16"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-16">16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-17"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-17">17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-18"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-18">18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-19"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-19">19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-20"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-20">20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-21"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-21">21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-22"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-22">22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-23"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-23">23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-24"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-24">24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-25"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-25">25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-26"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-26">26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-27"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-27">27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-28"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-28">28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-29"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-29">29</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-30"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-30">30</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-31"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-31">31</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-32"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-32">32</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-33"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-33">33</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-34"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-34">34</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-35"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-35">35</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-36"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-36">36</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-37"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-37">37</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-38"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-38">38</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-39"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-39">39</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-40"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-40">40</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-41"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-41">41</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-42"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-42">42</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-43"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-43">43</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-44"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-44">44</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-8-45"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-8-45">45</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span>(<span style="color:#007020">use-package</span> <span style="color:#bb60d5">eglot</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:ensure</span> <span style="color:#60add5">t</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:defer</span> <span style="color:#60add5">t</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:bind</span> (<span style="color:#007020">:map</span> <span style="color:#bb60d5">eglot-mode-map</span>
</span></span><span style="display:flex;"><span>              (<span style="color:#4070a0">&#34;C-c C-d&#34;</span> <span style="color:#666">.</span> <span style="color:#bb60d5">elpy-doc</span>)
</span></span><span style="display:flex;"><span>              (<span style="color:#4070a0">&#34;C-c C-e&#34;</span> <span style="color:#666">.</span> <span style="color:#bb60d5">eglot-rename</span>)
</span></span><span style="display:flex;"><span>              (<span style="color:#4070a0">&#34;C-c C-o&#34;</span> <span style="color:#666">.</span> <span style="color:#bb60d5">python-sort-imports</span>)
</span></span><span style="display:flex;"><span>              (<span style="color:#4070a0">&#34;C-c C-f&#34;</span> <span style="color:#666">.</span> <span style="color:#bb60d5">eglot-format-buffer</span>))
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:hook</span> ((<span style="color:#bb60d5">python-mode</span> <span style="color:#666">.</span> <span style="color:#bb60d5">eglot-ensure</span>)
</span></span><span style="display:flex;"><span>         (<span style="color:#bb60d5">python-mode</span> <span style="color:#666">.</span> <span style="color:#bb60d5">flyspell-prog-mode</span>)
</span></span><span style="display:flex;"><span>         (<span style="color:#bb60d5">python-mode</span> <span style="color:#666">.</span> <span style="color:#bb60d5">superword-mode</span>)
</span></span><span style="display:flex;"><span>         (<span style="color:#bb60d5">python-mode</span> <span style="color:#666">.</span> <span style="color:#bb60d5">hs-minor-mode</span>)
</span></span><span style="display:flex;"><span>         (<span style="color:#bb60d5">python-mode</span> <span style="color:#666">.</span> (<span style="color:#007020">lambda</span> () (<span style="color:#bb60d5">set-fill-column</span> <span style="color:#40a070">88</span>))))
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:config</span>
</span></span><span style="display:flex;"><span>  <span style="color:#60a0b0;font-style:italic">;; 用basedpyright替换默认pylsp</span>
</span></span><span style="display:flex;"><span>  <span style="color:#60a0b0;font-style:italic">;; 它会提供补全、跳转定义等功能，但诊断信息交给 flycheck</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#bb60d5">add-to-list</span> <span style="color:#517918">&#39;eglot-server-programs</span>
</span></span><span style="display:flex;"><span>               <span style="color:#666">&#39;</span>(<span style="color:#bb60d5">python-mode</span>     <span style="color:#666">.</span> (<span style="color:#4070a0">&#34;basedpyright-langserver&#34;</span> <span style="color:#4070a0">&#34;--stdio&#34;</span>))
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>  <span style="color:#60a0b0;font-style:italic">;; 关闭 pyright 的 linting，由 ruff 处理</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#007020">setq</span> <span style="color:#bb60d5">eglot-workspace-configuration</span>
</span></span><span style="display:flex;"><span>        <span style="color:#666">&#39;</span>((<span style="color:#007020">:python</span> (<span style="color:#007020">:analysis</span> (<span style="color:#007020">:typeCheckingMode</span> <span style="color:#666">.</span> <span style="color:#4070a0">&#34;basic&#34;</span>)
</span></span><span style="display:flex;"><span>                              (<span style="color:#007020">:lintingMode</span> <span style="color:#666">.</span> <span style="color:#4070a0">&#34;off&#34;</span>)
</span></span><span style="display:flex;"><span>                              (<span style="color:#007020">:reportMissingImports</span> <span style="color:#666">.</span> <span style="color:#bb60d5">true</span>)))))
</span></span><span style="display:flex;"><span>  (<span style="color:#007020">setq</span> <span style="color:#bb60d5">eglot-ignored-server-capabilities</span>
</span></span><span style="display:flex;"><span>      <span style="color:#666">&#39;</span>(<span style="color:#007020">:diagnosticProvider</span>))    <span style="color:#60a0b0;font-style:italic">; 只让 Flymake 报告 lint</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#60a0b0;font-style:italic">;; 日志级别（调试时用 &#39;debug&#39;，日常用 &#39;warning&#39;）</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#007020">setq</span> <span style="color:#bb60d5">eglot-log-level</span> <span style="color:#517918">&#39;warning</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:init</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#007020">setq</span> <span style="color:#bb60d5">completion-category-overrides</span>
</span></span><span style="display:flex;"><span>        <span style="color:#666">&#39;</span>((<span style="color:#bb60d5">eglot</span> (<span style="color:#bb60d5">styles</span> <span style="color:#bb60d5">orderless</span>))))
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic">;; 保存时自动格式化（使用 eglot 内建格式化）</span>
</span></span><span style="display:flex;"><span>(<span style="color:#bb60d5">add-hook</span> <span style="color:#517918">&#39;python-mode-hook</span>
</span></span><span style="display:flex;"><span>          (<span style="color:#007020">lambda</span> ()
</span></span><span style="display:flex;"><span>            (<span style="color:#bb60d5">add-hook</span> <span style="color:#517918">&#39;before-save-hook</span> <span style="color:#517918">&#39;eglot-format-buffer</span> <span style="color:#60add5">nil</span> <span style="color:#60add5">t</span>))
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic">;; 启动成功提示</span>
</span></span><span style="display:flex;"><span>(<span style="color:#bb60d5">add-hook</span> <span style="color:#517918">&#39;eglot-managed-mode-hook</span>
</span></span><span style="display:flex;"><span>          (<span style="color:#007020">lambda</span> ()
</span></span><span style="display:flex;"><span>            (<span style="color:#06287e">message</span> <span style="color:#4070a0">&#34;[EGLOT] Connected to basedpyright&#34;</span>))
</span></span><span style="display:flex;"><span>)</span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<p>可以看出，eglot 帮助 Emacs 对接了很多外部服务： <code>basedpyrigh, elpy, flyspell</code>,
&hellip;&hellip;。它接受 <code>basedpyright</code> 等处理 python 代码后发来的信息，然后交给相应的工具去
处理， <code>eglot</code> 再最后统一显示出来。比如，我们可以在调用 <code>flymake</code> 进行语法检查，</p>
<div class="highlight-container">

  <button class="copy-code-btn outline">Copy</button>

  
  <div class="highlight"><div style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-9-1"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-9-1">1</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span>(<span style="color:#bb60d5">add-hook</span> <span style="color:#517918">&#39;eglot-managed-mode-hook</span> <span style="color:#06287e">#&#39;</span><span style="color:#bb60d5">flymake-ruff-load</span>)</span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<h3 id="代码格式化">代码格式化</h3>
<p>很多人写 python 代码，都不是很规范。由于 python 对格式有比较强的要求，不像 C/C++ 语言是自由格式。所以，我们可以用专门的工具来规范化代码。这里，仍然可以用 <code>ruff</code> 来完成此功能。</p>
<div class="highlight-container">

  <button class="copy-code-btn outline">Copy</button>

  
  <div class="highlight"><div style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-1"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-1"> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-2"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-2"> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-3"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-3"> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-4"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-4"> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-5"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-5"> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-6"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-6"> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-7"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-7"> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-8"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-8"> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-9"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-9"> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-10"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-10">10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-11"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-11">11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-12"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-12">12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-13"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-13">13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-14"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-14">14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-15"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-15">15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-16"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-16">16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-17"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-17">17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-18"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-18">18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-19"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-19">19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-20"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-20">20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-21"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-21">21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-22"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-22">22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-23"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-23">23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-24"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-24">24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-25"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-25">25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-26"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-26">26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-27"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-27">27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-28"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-28">28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-29"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-29">29</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-30"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-30">30</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-31"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-31">31</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="hl-10-32"><a style="outline:none;text-decoration:none;color:inherit" href="#hl-10-32">32</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span>(<span style="color:#007020">use-package</span> <span style="color:#bb60d5">ruff-format</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:ensure</span> <span style="color:#60add5">t</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:after</span> (<span style="color:#bb60d5">flymake</span> <span style="color:#bb60d5">ruff</span>)
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(<span style="color:#007020">use-package</span> <span style="color:#bb60d5">reformatter</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:ensure</span> <span style="color:#60add5">t</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:hook</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#bb60d5">python-mode</span>    <span style="color:#666">.</span> <span style="color:#bb60d5">ruff-format-on-save-mode</span>)
</span></span><span style="display:flex;"><span>  (<span style="color:#bb60d5">python-ts-mode</span> <span style="color:#666">.</span> <span style="color:#bb60d5">ruff-format-on-save-mode</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:config</span>
</span></span><span style="display:flex;"><span>  <span style="color:#60a0b0;font-style:italic">;; 定义ruff-format格式化命令</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#bb60d5">reformatter-define</span> <span style="color:#bb60d5">ruff-format</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007020">:program</span> <span style="color:#4070a0">&#34;ruff&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007020">:args</span> <span style="color:#666">&#39;</span>(<span style="color:#4070a0">&#34;format&#34;</span> <span style="color:#4070a0">&#34;--stdin-filename&#34;</span><span style="color:#666">,</span> <span style="color:#06287e">buffer-file-name</span> <span style="color:#4070a0">&#34;-&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#007020">:lighter</span> <span style="color:#4070a0">&#34; UrffFmt&#34;</span>
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(<span style="color:#007020">defcustom</span> <span style="color:#bb60d5">ruff-format-import-command</span> <span style="color:#4070a0">&#34;ruff&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4070a0">&#34;Ruff command to use for formatting.&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:type</span> <span style="color:#517918">&#39;string</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:group</span> <span style="color:#517918">&#39;ruff-format-import</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic">;;;###autoload (autoload &#39;ruff-format-import-buffer &#34;ruff-format-import&#34; nil t)</span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic">;;;###autoload (autoload &#39;ruff-format-import-region &#34;ruff-format-import&#34; nil t)</span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic">;;;###autoload (autoload &#39;ruff-format-import-on-save-mode &#34;ruff-format-import&#34; nil t)</span>
</span></span><span style="display:flex;"><span>(<span style="color:#bb60d5">reformatter-define</span> <span style="color:#bb60d5">ruff-format-import</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:program</span> <span style="color:#bb60d5">ruff-format-import-command</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:args</span> (<span style="color:#06287e">list</span> <span style="color:#4070a0">&#34;check&#34;</span> <span style="color:#4070a0">&#34;--fix&#34;</span> <span style="color:#4070a0">&#34;--select=I&#34;</span> <span style="color:#4070a0">&#34;--stdin-filename&#34;</span> (<span style="color:#007020">or</span> (<span style="color:#06287e">buffer-file-name</span>) <span style="color:#bb60d5">input-file</span>))
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:lighter</span> <span style="color:#4070a0">&#34; RuffFmt&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007020">:group</span> <span style="color:#517918">&#39;ruff-format-import</span>)</span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<p>文件保存时，代码会自动被格式化。</p>
<p>至此，我们已经打造了一个漂亮好用的 Python IDE。Enjoy it.</p>
<h2 id="probability_thingking"><span class="org-todo done __DONE">✔ DONE</span> 一个概率事件的启发 <span class="tag"><span class="thinking">thinking</span><span class="___">@思维</span></span></h2>
<p>我们从中学开始，就学了概率和统计，但是大多数人都被那些绕来绕去的数学题搞得头昏脑胀，完全不知道这些思想在现实中有什么用处。其实，日常生活中，大量的事情都是由概率和统计来支撑的。脑袋里如果没有这个思想，就很容易犯错误，甚至被骗。我用一个例子来说明一下。</p>
<h3 id="事例">事例</h3>
<p>如果社会上突然出现一种传染病，很致命，大概被传染变成阳性的概率是千分之一。大家都很担心，也希望早早地发现并预防。于是，科学家研制出了一种检测仪器，运用了最先进的科学技术，检测成功率为 99.9%。只要被感染，就能及时地检测出来。但是，大家都知道，任何仪器都有一定的出错概率，也就是误检率 &mdash;&mdash; 一个人没有被感染，但是被检测为阳性，俗称“假阳性”。科学家们又想了很多办法，最后也运用了最先进的科学技术，让误检率也变得很低，最后的效果也是 99.9%的可能不会出现“假阳性”。</p>
<p>现在，如果一个人被这台仪器检测为阳性了，请问，他真正被感染的概率是多大？</p>
<h3 id="暂停">暂停</h3>
<p>请大家暂停往下读，自己猜一下正确答案。</p>
<hr>
<p>&hellip;</p>
<p>&hellip;</p>
<h3 id="答案">答案</h3>
<p>很多人都觉得，这个仪器这么先进，检测成功率为 99.9%，误检率也很低，那一旦被检测出来是阳性，至少也是 80%以上的可能性被感染了吧。于是吓得不行。但真实的答案是：只有 50%的可能性是阳性。</p>
<p>我来解释一下，由于这个病的发病率是千分之一，可以假定 1000 个人里，有一个人是真正阳性的。这台仪器的检测正确率是 99.9%，因此这个阳性的人，一定会被检测出来。但是，虽然仪器的误检率也很低，但是也会把正常的人检测出是阳性。这个概率是多少呢？99.9%意味着，1000 个人中也有一个正常人会被检测为“假阳性”。于是，在这 1000 个人中，就有两个人会被仪器检测为阳性，但只有一个人是真被感染者。</p>
<p>所以，如果仪器说一个人是阳性，意味着，他/她只有一半的可能是真正的被感染者。</p>
<h3 id="解释">解释</h3>
<p>为什么答案和直觉相差这么大呢？奥秘就在于这个病的真实发病率，只有千分之一。也就是说，这个病的犯病率是小概率事件。我们大家对于小概率没有直观的感受和认识，于是现实生活中，遇到这种情况，就会慌了手脚，觉得这么先进的仪器，都检测出来是阳性了，还能是假的？很多骗子于是就趁虚而入，大发其财了。</p>
<p>所以，卡尔·萨根说过一句名言：Extraordinary claims require extraordinary evidence &mdash;&mdash; 超凡主张须有超凡证据。一件事，如果发生的概率很小，我们如果要下结论，就必须格外慎重，需要更多的证据来支撑才行。</p>
<h3 id="引申">引申</h3>
<p>因此，对于大概率事件和小概率事件，大家一定要有一定的认知。在上面的例子中，如果发病率是万分之一，大家可以算算，即使这么先进的仪器检测出来是阳性，真实的得病概率是多大？</p>
<p>万分之一的发病率，对于真实世界来说，是很常见的。大多数的疑难杂症，都远远低于这个概率。所以，现实生活中，一定不要迷信哪一家机构的诊断结果，不是说他们水平不高，而是数学就证明了，多做几次检测，才是最重要的。</p>
<h2 id="math_thingking"><span class="org-todo done __DONE">✔ DONE</span> 一个奇妙的数学思维 <span class="tag"><span class="thinking">thinking</span><span class="___">@思维</span></span></h2>
<p>数学真是一个奇怪的东西，我们早就知道了各种美妙的数学思想，以及抽象美带来的震撼。前两天，我看到一个关于数学命题证明的小故事，再一次地刷新了我对于数学思想的认识。</p>
<p>我们都知道，数学证明中有一种方法叫反证法，就是通过是否能找出一个反例，来证明一个命题的正确性。但是，这次说的是，我们找不到反例，但依然能够用反证法来证明一个命题。我简单地描述一下这个命题，然后用我自己理解的方式来讲述一下这个证明过程（如果证明错了，责任全在我，原来的数学思想应该是正确的 😉）</p>
<h3 id="命题">命题</h3>
<p>请判断并证明：一个无理数的无理数次幂，一定是无理数。</p>
<h3 id="解释">解释</h3>
<p>无理数就是无限不循环小数，比如 \(\pi\), \(e\), &hellip;&hellip;, 等等。由于无理数无法精确得到所有数值，所以一个无理数的无理数次幂，除了少数情况外，是无法准确得到所有数值的。比如，\(\pi^{\pi}\)，它的前 30 位数值是：36.4621596072079117709908260227。我们根本无法从中判断，最后的数值是否是一个有理数，还是仍然为无理数。</p>
<h3 id="证明">证明</h3>
<p>我们用反证法来证明此命题，即假设原命题是成立的。</p>
<p>首先，我们构造一个无理数的无理数次幂： \(x = \sqrt{2}^{\sqrt{2}}\), 这个数值有两种情况：</p>
<ol>
<li>\(x\) 为有理数</li>
<li>\(x\) 为无理数</li>
</ol>
<p>对于结果 1，那命题当然就错了，因为我们找到了一个无理数的无理数次幂为有理数。我们用反证法来判断情况 2，我们继续构造一个新的数： \(y = x^{\sqrt{2}}\), 运算可得：</p>
<p>\(y = \sqrt{2}^{\sqrt{2}^{\sqrt{2}}} = \sqrt{2}^2 = 2 \)</p>
<p>由于 \(x\) 为无理数，根据假设，\(y\) 也应该是无理数，但现在我们得到了一个有理数 \(2\)，所以假设不成立，结论应该是，无理数的无理数次幂，不一定是无理数。</p>
<h3 id="说明">说明</h3>
<p>这里，最奇妙的就是，我们虽然构造了一个无理数的无理数次幂：\(\sqrt{2}^{\sqrt{2} }\)，但是我们并没有实际求出来这个数，也完全没有证明，这个数到底是无理数还是有理数。也就是说，我们用了反证法，但是并没有实际找到一个反例，就证明了原来的命题不成立。</p>
<p>啊，多么奇妙的数学思想啊。</p>
<h3 id="p-dot-s-dot">P.S.</h3>
<p>大家可能有点好奇，到底 \(\sqrt{2}^{\sqrt{2} }\) 是不是有理数啊。我用心爱的 Wolfram 计算了一下前 1000 位数值，你们猜，它到底是不是有理数？😜</p>
<p>\(\sqrt{2}^{\sqrt{2}
} = \)</p>
<p>1.632526919438152844773495381024719602079108857053
11411724778068438303520599861664224785550750662
60414230011620076508762926586855535678286653743
53276990370339509808349458727844365578417316013
87397734571771945017640579176808540612696970706
77170888211473865443716121182725324216022231689
35434603655006804958808606092092531292648747441
39100350665100223159724526414595020972636096696
48057571699115982318026242029527507671359747631
50951814992616526918951905735917879441942227750
48361947119473707135051457034779869040074304850
86049086756447969815057362491879184271662118777
21616761344994650906881387122735130101636571052
64559906025136865172262615799791196913108286037
30870686736120983480646071979524565988415556211
89979103761174458226636201867544028322841005469
75220327810489296271028397543501936633946445408
54828542034506598152799747777276307577783001254
46163190919411727134856477923053227331124570871
94322830350968985979373357020305196153528119081
54595746674092743048895923198652644685232660662
62013475716</p>
<h2 id="china_in_village"><span class="org-todo done __DONE">✔ DONE</span> 《一个村庄里的中国》&mdash;&mdash; 改革，改变了什么 <span class="tag"><span class="reading">reading</span><span class="___">@读书</span></span></h2>
<p>这本书在我的书库里放了很久，都没有翻开来读。一是太厚重，二来也太沉重。但心里一直记挂着它，于是借这次来北京办事，路途和晚上，没有其他什么事，也就排除干扰，认真读完。果然如自己所料，读完之后，沉重的部分更加沉重，而当年迷茫之处，似乎也没有开悟多少。</p>


<div class="box">
<figure  itemprop="associatedMedia"
  itemscope itemtype="http://schema.org/ImageObject" 
  style="max-width:60%" >
    <div class="img">
      <img itemprop="thumbnail" src="/img/china_in_village.jpg" />
    </div>
    <a href="/img/china_in_village.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

<hr>
<p>《一个村庄里的中国》以作者熊培云从小生活的小堡村为例，讲述了一个村庄近百年的变迁，进而引伸出国家的变化。中国几千年来都是一个农业国家，虽然近 30 年，随着世界潮流的进步，也大大加快了现代化的进程。但各种社会现象，以及出现的很多社会问题，本质上都与农村、农业和农民息息相关。我博士毕业的 2001 年前后，曾经社会上很热烈地讨论“三农”问题。当时，一个年轻的乡党委书记&mdash;李昌平，给总理写了封信，大声呼吁：农民真苦、农村真穷、农业真危险！引起了社会极大的反响，高层也开始认真对待“三农”。我当时读了很多相关的书籍和文章，和志刚、唐博士都不止一次激烈争辩过类似话题，那就是，农民的问题，到底是个人因素多还是国家因素重？</p>
<p>封建帝王时代，自不必说，农民只是维系社会运转的零件而已。“草民”、“蚁民”、“贱民”等称呼，有自嘲的，有被强加的。但对于统治者来说，大约农民和一棵草、一只蚂蚁，真不会有多大区别。到了民国时代，从上层到社会中坚，很多人开始反思，如果农民不富足不开化，国家怎么称得上发达？国家又如何与列强抗衡？上个世纪二十年代开始的各种改革，有官方的，有自发的，有热血人士主动深入农村试验的&hellip;&hellip;，不一而足。但结果毫无例外，自然都是失败了。</p>
<p>因为土改，吸引了更多农村子弟参与革命。到了胜利，又回到农村。曾经的土地流转，最后又复归原点。底层的人民，似乎什么都没有拥有过，而有些人，却上下其手，城乡通吃，两面的利益都获取了。如今的乡村，青壮年流失严重，老少两极留守，诸多问题，基本是靠个体和家庭来消化。经济高速发展的时候，城市还可以带动农村。等到经济减缓或者停滞时，城市还需要农村来反哺。而克强总理曾经公开的数据 &mdash;&mdash; 6 亿人口，月收入低于千元 &mdash;&mdash; 如何平衡呢？</p>
<p>一个村庄的百年变迁，似乎也没有逃过多少轮回的命运。村庄里看出的国家，又有多少人的命运，在时代的潮流中反复轮回？</p>
<p>我虽然是油田出生的孩子，但从小钻井公司的大院围墙外，都是农村。我也喜欢一个人，经常翻出围墙，到田野里疯跑。经常跑累了，就静静地坐在田间地头，和农民聊天。或者，就抱膝席地而坐，看天上的白云散了又聚，聚了又散。父亲也经常给我讲小时候在农村的各种苦日子，家族曾经发达过，但在爷爷小时候，他的父亲早逝，于是家道中落，孤儿寡母，和大多人农人一样，苦苦维持着生计。父亲兄弟姊妹六人，也只有他读书考学离开了农村。于是，《一个村庄里的中国》里描述的小堡村，我读起来仿佛就很熟悉，很像父亲从小生活的地方，而里面的人，大约也像我的爷爷们。</p>
<p>还在本科时，我就读过教员写的《湖南农民运动考察报告》、《论十大关系》等文章。当时模模糊糊，并不真切地明白里面的很多含义。如今，自己感受过更多的社会百态，也有了一些感悟。可是，真实世界里的很多朋友，似乎在城里待久了，或者从未感触过农村的具体生活，常常觉得我在夸张。我想，大家如果都来读读《一个村庄里的中国》，感受一下真实的农村，同理心和社会心大概都会好很多。在这个世界里，大家的悲欢，并不相同。倘若能相通一些，也许能少许多争吵。</p>
<p>我总怀疑熊培云和我是一个年代的人，检索之后，果不其然。书斋里象牙塔中的知识分子啊，也要多写一些这样的文章才好，多读一些这样的文章才好。</p>

      </div>

      
      
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">RDS</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
      0001-01-01
      
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">License</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>



      
      
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">Reward</label>
  <div class="qr-code">
    
    
      <label class="qr-code-image" for="reward">
        <img class="image" src="/img/wechat.jpg">
        <span>Wechat</span>
      </label>
    
      <label class="qr-code-image" for="reward">
        <img class="image" src="/img/alipay.jpg">
        <span>Alipay</span>
      </label>
  </div>
</div>


      <footer class="post-footer">
        


        
        <nav class="post-nav">
          
          <a class="prev" href="/post/fangzhouzi-ku-yu-bei.html">
            
            <i class="iconfont">
              
<svg aria-hidden="true" class="lucide lucide-chevron-left hi-svg-inline" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="m15 18-6-6 6-6"/></svg>
            </i>
            <span class="prev-text nav-default">舟子的苦与悲</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
          
        </nav>
      </footer>
    </article>

    
    
    
    


    
    

  

  
  

  
  

  

  

    

  

  <div id="remark42"></div>


  </div>

  
  <nav class="toc" id="toc">
    <div class="toc-title">Table of Contents</div>
    <div class="toc-content custom-scrollbar">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#wuti"><span class="org-todo done __DONE">✔ DONE</span> 无题 <span class="tag"><span class="misc">misc</span><span class="___">@感悟</span></span></a></li>
    <li><a href="#deep_learning_hisitory"><span class="org-todo done __DONE">✔ DONE</span> 《深度学习革命》—— 一部波澜壮阔的当代人工智能简史 <span class="tag"><span class="reading">reading</span><span class="___">@读书</span></span></a></li>
    <li><a href="#emacs_as_python_IDE"><span class="org-todo done __DONE">✔ DONE</span> 把 Emacs 打造为 Python IDE <span class="tag"><span class="tech">tech</span><span class="___">@技术</span></span></a>
      <ul>
        <li><a href="#ide-的功能">IDE 的功能</a></li>
        <li><a href="#显示">显示</a></li>
        <li><a href="#文档说明">文档说明</a></li>
        <li><a href="#语法检查">语法检查</a></li>
        <li><a href="#代码跳转">代码跳转</a></li>
        <li><a href="#代码补全">代码补全</a></li>
        <li><a href="#lsp">LSP</a></li>
        <li><a href="#代码格式化">代码格式化</a></li>
      </ul>
    </li>
    <li><a href="#probability_thingking"><span class="org-todo done __DONE">✔ DONE</span> 一个概率事件的启发 <span class="tag"><span class="thinking">thinking</span><span class="___">@思维</span></span></a>
      <ul>
        <li><a href="#事例">事例</a></li>
        <li><a href="#暂停">暂停</a></li>
        <li><a href="#答案">答案</a></li>
        <li><a href="#解释">解释</a></li>
        <li><a href="#引申">引申</a></li>
      </ul>
    </li>
    <li><a href="#math_thingking"><span class="org-todo done __DONE">✔ DONE</span> 一个奇妙的数学思维 <span class="tag"><span class="thinking">thinking</span><span class="___">@思维</span></span></a>
      <ul>
        <li><a href="#命题">命题</a></li>
        <li><a href="#解释">解释</a></li>
        <li><a href="#证明">证明</a></li>
        <li><a href="#说明">说明</a></li>
        <li><a href="#p-dot-s-dot">P.S.</a></li>
      </ul>
    </li>
    <li><a href="#china_in_village"><span class="org-todo done __DONE">✔ DONE</span> 《一个村庄里的中国》—— 改革，改变了什么 <span class="tag"><span class="reading">reading</span><span class="___">@读书</span></span></a></li>
  </ul>
</nav>
    </div>
  </nav>


</div>
  </main>

  <footer id="footer" class="site-footer">
    <div class="social-icon-links">
  


<a href="mailto:ddsteed@gmail.com" rel="me noopener" class="social-icon-link" title="email" >
  
<svg aria-hidden="true" class="icon hi-svg-inline" fill="currentColor" height="1em" version="1.1" viewBox="0 0 1451 1024" width="1em" xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

</a>
<a href="https://github.com/ddsteed" rel="me noopener" class="social-icon-link" title="github"  target="_blank" >
  
<svg aria-hidden="true" class="icon hi-svg-inline" fill="currentColor" height="1em" version="1.1" viewBox="0 0 1024 1024" width="1em" xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

</a>


<a href="/index.xml" rel="noopener alternate" type="application/rss&#43;xml" class="social-icon-link" title="rss"
  target="_blank">
  
<svg aria-hidden="true" class="lucide lucide-rss hi-svg-inline" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/></svg>
</a>

</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
    2012 -
    2025
    <span class="heart">
      
      <i class="iconfont">
        
<svg aria-hidden="true" class="lucide lucide-heart hi-svg-inline" fill="none" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>
      </i>
    </span><span class="author">
      RDS
      
    </span></span>

  
  

  
</div>

  </footer>

  




<script type="text/javascript" src="/js/main.d0bddb83010e88d7d06e89c8d78893a861b4c1090680a842c4e9299e3fc40b34.js" integrity="sha256-0L3bgwEOiNfQbonI14iTqGG0wQkGgKhCxOkpnj/ECzQ=" crossorigin="anonymous"></script>



  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>




  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.css"
    integrity="sha384-BdGj8xC2eZkQaxoQ8nSLefg4AV4/AwB3Fj+8SUSo7pnKP6Eoy18liIKTPn9oBYNG"
    crossorigin="anonymous">

  
  <script defer
    src="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/katex.min.js"
    integrity="sha384-JiKN5O8x9Hhs/UE5cT5AAJqieYlOZbGT3CHws/y97o3ty4R7/O5poG9F3JoiOYw1"
    crossorigin="anonymous"></script>

  
  <script defer
    src="https://cdn.jsdelivr.net/npm/katex@0.11.0/dist/contrib/auto-render.min.js"
    integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI"
    crossorigin="anonymous" onload="renderMathInElement(document.body);">
  </script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        
      });
    });
  </script>






  
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  









  <script id="dsq-count-scr" src="//.disqus.com/count.js" async></script>



<script>
  var remark_config = {
    host: 'https:\/\/remark42.example.com',
    site_id: 'remark',
    components: [
    'embed',
    'counter',
    ],
  }
  !function(e,n){for(var o=0;o<e.length;o++){var r=n.createElement("script"),c=".js",d=n.head||n.body;"noModule"in r?(r.type="module",c=".mjs"):r.async=!0,r.defer=!0,r.src=remark_config.host+"/web/"+e[o]+c,d.appendChild(r)}}(remark_config.components||["embed"],document);
</script>







</body>

</html>
